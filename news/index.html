<!DOCTYPE html>
<html lang="ua">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prosto-Land | –ù–æ–≤–∏–Ω–∏</title>
    <meta name="description" content="–û—Å—Ç–∞–Ω–Ω—ñ –Ω–æ–≤–∏–Ω–∏ —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ Prosto-Land.">
    <link rel="icon" type="image/png" href="https://cdn.discordapp.com/emojis/1243186309166665758.png">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #1c1515;
            --container-bg: rgba(51, 51, 51, 0.9); 
            --text-color: #eee;
            --highlight-color: #1fd0cd;
            --button-bg: #414141;
            --button-hover-bg: #545454;
            --shadow-color: rgba(0, 0, 0, 0.6);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Open Sans', sans-serif;
            min-height: 100vh;
            background: var(--primary-bg) url(https://www.prosto-land.top/files/bgk.png) no-repeat center center fixed;
            background-size: cover;
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden; /* –©–æ–± –Ω–µ –±—É–ª–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª—É */
        }

        /* Header */
        header { width: 100%; height: 60px; display: flex; justify-content: center; align-items: center; background: rgba(0,0,0,0.4); backdrop-filter: blur(5px); position: fixed; top:0; z-index: 100; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .top-bar-nav { display: flex; gap: 15px; }
        .top-bar-nav a { padding: 8px 16px; background: rgba(255,255,255,0.1); color: #ccc; text-decoration: none; border-radius: 6px; transition: 0.3s; font-size: 0.9em; font-weight: bold; }
        .top-bar-nav a:hover, .top-bar-nav a.active { background: var(--highlight-color); color: #000; box-shadow: 0 0 10px var(--highlight-color); }
        .menu-toggle { display: none; } /* –°–ø—Ä–æ—â–µ–Ω–æ –¥–ª—è –ü–ö, –Ω–∞ –º–æ–±—ñ–ª—å–Ω–æ–º—É –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ */

        /* MAIN Layout */
        main {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding-top: 80px; /* –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ–≥–æ —Ö–µ–¥–µ—Ä–∞ */
            padding-bottom: 40px;
        }

        .slider-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        /* News Box 800x800 */
        .news-box {
            width: 800px;
            height: 800px;
            background-color: var(--container-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            border-radius: 12px;
            padding: 40px;
            overflow-y: auto; /* –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Å–∫—Ä–æ–ª */
            position: relative;
            /* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Å–∫—Ä–æ–ª–±–∞—Ä—É */
            scrollbar-width: thin;
            scrollbar-color: var(--highlight-color) rgba(0,0,0,0.3);
        }

        .news-box::-webkit-scrollbar { width: 8px; }
        .news-box::-webkit-scrollbar-track { background: rgba(0,0,0,0.3); border-radius: 4px; }
        .news-box::-webkit-scrollbar-thumb { background-color: var(--highlight-color); border-radius: 4px; }

        /* Navigation Buttons (Arrows) */
        .nav-btn {
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }
        .nav-btn:hover:not(:disabled) {
            background: var(--highlight-color);
            color: #000;
            transform: scale(1.1);
        }
        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            border-color: transparent;
        }

        /* News Content Styling */
        .news-date {
            color: var(--highlight-color);
            font-size: 0.9em;
            margin-bottom: 10px;
            font-weight: bold;
            display: block;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .news-title {
            font-size: 2.5em;
            margin-bottom: 25px;
            line-height: 1.2;
            color: #fff;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 15px;
        }
        .news-content {
            font-size: 1.1em;
            line-height: 1.8;
            color: #ddd;
        }
        
        /* Image Support inside Content */
        .news-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: block; /* –©–æ–± –Ω–µ –±—É–ª–æ –∑–±–æ–∫—É —Ç–µ–∫—Å—Ç—É, —è–∫—â–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ */
        }

        /* Loading / Error states */
        .status-msg {
            display: flex;
            height: 100%;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            color: #aaa;
            flex-direction: column;
            gap: 15px;
        }

        @media (max-width: 1000px) {
            .news-box { width: 90vw; height: 70vh; padding: 20px; }
            .slider-wrapper { flex-direction: column; gap: 10px; }
            .nav-btn { width: 50px; height: 50px; transform: rotate(90deg); /* –°—Ç—Ä—ñ–ª–∫–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ –Ω–∞ –º–æ–±—ñ–ª—å–Ω–æ–º—É */ }
            /* –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Å—Ç—Ä—ñ–ª–∫–∏ –Ω–∞–∑–∞–¥ —è–∫—â–æ —Ç—Ä–µ–±–∞ */
            .nav-btn.prev { transform: rotate(90deg); } 
            .nav-btn.next { transform: rotate(90deg); }
            /* –ê–±–æ –∫—Ä–∞—â–µ —Ä–æ–∑—Ç–∞—à—É–≤–∞—Ç–∏ —ó—Ö –∑–Ω–∏–∑—É –ø–æ—Ä—É—á */
            .slider-wrapper { position: relative; }
            .nav-btn { position: absolute; bottom: 20px; z-index: 10; transform: none; }
            .prev { left: 20px; }
            .next { right: 20px; }
            .news-box { padding-bottom: 80px; } /* –ú—ñ—Å—Ü–µ –ø—ñ–¥ –∫–Ω–æ–ø–∫–∏ */
        }
    </style>
</head>
<body>

<header>
    <nav class="top-bar-nav">
        <a href="/">–ì–æ–ª–æ–≤–Ω–∞</a>
        <a href="/news" class="active">–ù–æ–≤–∏–Ω–∏</a>
        <a href="/vote">–ì–æ–ª–æ—Å—É–≤–∞—Ç–∏</a>
        <a href="/donat">–î–æ–Ω–∞—Ç</a>
        <a href="/rules">–ü—Ä–∞–≤–∏–ª–∞</a>
    </nav>
</header>

<main>
    <div class="slider-wrapper">
        <button class="nav-btn prev" id="btn-prev" onclick="changePage(-1)">&#10094;</button>
        
        <div class="news-box" id="news-container">
            <div class="status-msg">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
        </div>

        <button class="nav-btn next" id="btn-next" onclick="changePage(1)">&#10095;</button>
    </div>
</main>

<script>
    let currentPage = 1;
    let totalPages = 1;

    async function fetchNews(page) {
        const container = document.getElementById('news-container');
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');

        // –ï—Ñ–µ–∫—Ç "–∑–Ω–∏–∫–Ω–µ–Ω–Ω—è" –ø–µ—Ä–µ–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
        container.style.opacity = '0.5';

        try {
            // –ó–∞–ø–∏—Ç—É—î–º–æ API: limit=1 (–æ–¥–Ω–∞ –Ω–æ–≤–∏–Ω–∞ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É)
            const response = await fetch(`https://api.prosto-land.top/api/public/news?page=${page}&limit=1`);
            
            if (!response.ok) throw new Error('–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
            
            const data = await response.json();
            
            totalPages = data.pages_total;
            currentPage = data.page;

            if (data.items.length === 0) {
                container.innerHTML = '<div class="status-msg">–ù–æ–≤–∏–Ω –ø–æ–∫–∏ –Ω–µ–º–∞—î ü§∑‚Äç‚ôÇÔ∏è</div>';
                toggleButtons(false, false);
                container.style.opacity = '1';
                return;
            }

            const item = data.items[0]; // –ë–µ—Ä–µ–º–æ –ø–µ—Ä—à—É (—ñ —î–¥–∏–Ω—É) –Ω–æ–≤–∏–Ω—É
            const date = new Date(item.created_at).toLocaleString('uk-UA', { 
                day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute:'2-digit' 
            });

            // –†–µ–Ω–¥–µ—Ä–∏–º–æ –∫–æ–Ω—Ç–µ–Ω—Ç. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ item.content —è–∫ HTML, —â–æ–± –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏
            container.innerHTML = `
                <span class="news-date">${date}</span>
                <h1 class="news-title">${escapeHtml(item.title)}</h1>
                <div class="news-content">${item.content}</div> `;

            // –°–∫—Ä–æ–ª–∏–º–æ –Ω–∞–≤–µ—Ä—Ö –ø—Ä–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—ñ
            container.scrollTop = 0;

        } catch (error) {
            console.error(error);
            container.innerHTML = '<div class="status-msg" style="color:#ff6b6b">–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –Ω–æ–≤–∏–Ω—É.</div>';
        } finally {
            container.style.opacity = '1';
            updateButtons();
        }
    }

    function updateButtons() {
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');
        
        // –õ–æ–≥—ñ–∫–∞: "–ù–∞–∑–∞–¥" –≤–µ–¥–µ –¥–æ —Å—Ç–∞—Ä—ñ—à–∏—Ö –Ω–æ–≤–∏–Ω (–±—ñ–ª—å—à–∏–π –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏, –±–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è Newest first)
        // –ê–ª–µ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ª–æ–≥—ñ—á–Ω—ñ—à–µ: 
        // <- (–õ—ñ–≤–æ—Ä—É—á) - –ù–∞—Å—Ç—É–ø–Ω–∞ (–Ω–æ–≤—ñ—à–∞) –∞–±–æ –ü–æ–ø–µ—Ä–µ–¥–Ω—è?
        // –ó–∞–∑–≤–∏—á–∞–π —Å–ª–∞–π–¥–µ—Ä–∏: <- (–ù–∞–∑–∞–¥/–ü–æ–ø–µ—Ä–µ–¥–Ω—è) ... -> (–í–ø–µ—Ä–µ–¥/–ù–∞—Å—Ç—É–ø–Ω–∞)
        // –û—Å–∫—ñ–ª—å–∫–∏ API –≤—ñ–¥–¥–∞—î [0] —è–∫ –Ω–∞–π–Ω–æ–≤—ñ—à—É:
        // Page 1 = –ù–∞–π—Å–≤—ñ–∂—ñ—à–∞.
        // Page 2 = –°—Ç–∞—Ä—ñ—à–∞.
        // –¢–æ–º—É –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è "Next ->" –º–∞—î –∑–±—ñ–ª—å—à—É–≤–∞—Ç–∏ Page (–π—Ç–∏ –≤ –º–∏–Ω—É–ª–µ).
        // –ù–∞—Ç–∏—Å–∫–∞–Ω–Ω—è "Prev <-" –º–∞—î –∑–º–µ–Ω—à—É–≤–∞—Ç–∏ Page (–π—Ç–∏ –¥–æ —Å–≤—ñ–∂–∏—Ö).

        btnPrev.disabled = currentPage <= 1;
        btnNext.disabled = currentPage >= totalPages;
    }

    function changePage(delta) {
        const newPage = currentPage + delta;
        if (newPage >= 1 && newPage <= totalPages) {
            fetchNews(newPage);
        }
    }

    function toggleButtons(prev, next) {
        document.getElementById('btn-prev').disabled = !prev;
        document.getElementById('btn-next').disabled = !next;
    }

    // –ë–µ–∑–ø–µ—á–Ω–∏–π –≤–∏–≤—ñ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–∞–ª–µ –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞–ª–∏—à–∞—î–º–æ HTML)
    function escapeHtml(text) {
        if (!text) return "";
        return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    }

    // –°—Ç–∞—Ä—Ç
    fetchNews(1);
</script>

</body>
</html>
